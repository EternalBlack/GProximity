/*
 * gproximity v0.1.1
 *
 * Licensed GPLv3 for open source use
 * or GProximity Commercial License for commercial use
 *
 * http://gproximity.eternalblack.com
 * Copyright 2016 Eternal Black | Markus Bittner
 */
!function(t){t.gproximity=function(t,e,a){n(t,0).then(function(){n(e,1).then(function(){var t=calcDistance(_lat1,_lng1,_lat2,_lng2),n=Math.round(1e3*t);return"function"==typeof a&&a.call(this,n),n}).fail(function(){return null})}).fail(function(){return null})};var n=function(n,e){var a=t.Deferred();switch(t.type(n)){case"string":var o=new google.maps.Geocoder;o.geocode({address:n},function(t,n){"OK"==n?(e?(_lat2=t[0].geometry.location.lat(),_lng2=t[0].geometry.location.lng()):(_lat1=t[0].geometry.location.lat(),_lng1=t[0].geometry.location.lng()),a.resolve()):a.reject()});break;case"array":e?(_lat2=n[0],_lng2=n[1]):(_lat1=n[0],_lng1=n[1]);break;default:a.reject()}return a};t.gproximity.init=function(n,e){return"undefined"==typeof e&&(e=""),t.getScript("https://maps.googleapis.com/maps/api/js?key="+n+"&callback="+e,function(){}),!0},calcDistance=function(t,n,e,a){var o=6371,r=t*(Math.PI/180),c=n*(Math.PI/180),l=e*(Math.PI/180),i=a*(Math.PI/180),u=c*o*Math.cos(r),g=r*o,f=i*o*Math.cos(l),s=l*o,h=u-f,p=g-s,y=Math.sqrt(h*h+p*p);return y}}(jQuery);
